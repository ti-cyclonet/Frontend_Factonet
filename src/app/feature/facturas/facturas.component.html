<div class="bg-gray-800 rounded-xl shadow-2xl space-y-6 p-4 sm:p-6 lg:p-8">

  <!-- Contenedor Superior -->
  <div class="bg-gray-900/50 rounded-lg p-4 shadow-inner">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center">
      <h1 class="text-3xl font-extrabold text-green-400 mb-4 sm:mb-0 matrix-title-custom">
        GESTIÓN DE FACTURAS
      </h1>
      <button
        (click)="openFacturaModal()"
        class="matrix-btn add-btn flex items-center"
        aria-label="Añadir nuevo registro"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        ADD
      </button>
    </div>

    <div class="mt-4">
      <input
        type="text"
        placeholder="Buscar por cliente o ID de transacción..."
        class="w-full p-2 rounded-md bg-gray-700 text-green-300 border border-green-700/50 focus:outline-none focus:ring-1 focus:ring-green-400 placeholder-green-500/70"
      />
    </div>
  </div>

  <!-- Tabla -->
  <div class="bg-gray-900/50 rounded-lg p-0 h-full overflow-hidden">
    <div class="overflow-x-auto">
      <table class="min-w-full divide-y-0 matrix-table">
        <thead class="bg-black/50 matrix-header">
          <tr>
            <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-green-400">ID TRANS.</th>
            <th class="px-6 py-3 text-left text-xs font-semibold uppercase tracking-wider text-green-400">ENTIDAD CLIENTE</th>
            <th class="px-6 py-3 text-right text-xs font-semibold uppercase tracking-wider text-green-400">MONTO (USD)</th>
            <th class="px-6 py-3 text-center text-xs font-semibold uppercase tracking-wider text-green-400">ESTADO PAGO</th>
            <th class="px-6 py-3 text-center text-xs font-semibold uppercase tracking-wider text-green-400">ACCIONES</th>
          </tr>
        </thead>

        <tbody class="divide-y-0">
          <tr *ngFor="let factura of facturas; trackBy: trackById"
              class="transition duration-150 matrix-row hover:bg-green-900/10">

            <td class="px-6 py-3 whitespace-nowrap text-sm font-medium text-green-400">
              {{ factura.numero }}
            </td>

            <td class="px-6 py-3 whitespace-nowrap text-sm text-gray-200">
              {{ factura.cliente | uppercase }}
            </td>

            <td class="px-6 py-3 whitespace-nowrap text-sm font-bold text-green-300 text-right">
              {{ factura.total | currency:'USD':'symbol':'1.2-2' }}
            </td>

            <td class="px-6 py-3 whitespace-nowrap text-center">
              <span class="px-3 py-1 inline-flex text-xs leading-5 font-bold rounded matrix-badge"
                    [ngClass]="getStatusClass(factura.estado)">
                {{ factura.estado | uppercase }}
              </span>
            </td>

            <td class="px-6 py-3 whitespace-nowrap text-center text-sm font-medium">
              <div class="flex justify-center space-x-2">
                <!-- Botón EDITAR -->
                <button (click)="showToast('Editando ' + factura.numero, 'warning', 'A', 0)"
                        class="p-2 rounded-full hover:bg-orange-500/20 text-orange-400 transition"
                        title="Editar">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z" />
                    <path fill-rule="evenodd"
                          d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"
                          clip-rule="evenodd" />
                  </svg>
                </button>

                <!-- Botón ELIMINAR -->
                <button (click)="confirmDeleteFactura(factura)"
                        class="p-2 rounded-full hover:bg-red-500/20 text-red-400 transition"
                        title="Eliminar">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd"
                          d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z"
                          clip-rule="evenodd" />
                  </svg>
                </button>
              </div>
            </td>
          </tr>

          <tr *ngIf="facturas.length === 0">
            <td colspan="5" class="px-6 py-10 text-center text-gray-500 bg-gray-900/50">
              NO HAY REGISTROS ENCONTRADOS.
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
